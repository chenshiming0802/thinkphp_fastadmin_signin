var t,e;import{m as s,a as n,o as l,c as o,w as i,b as r,F as a,r as c,n as u,d as f,e as d,i as p,f as h,g,h as m,j as y,S as _,k as x,x as k,s as v,l as b,p as w,q as j,t as C,u as S,v as $}from"./index-BjfunRpr.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{x as U,a as T,r as q}from"./uv-icon.B7eKapMU.js";import{_ as H}from"./xc-uv-clogin-loginform.CqFj7ZM3.js";import{_ as A}from"./uv-button.C7uUtOfu.js";import{_ as B}from"./uv-parse.B2AC3NZW.js";import{_ as E}from"./uv-tabs.Dp5Yvzov.js";import{x as L}from"./XsArrayUtils.Be-EjtvS.js";import"./uv-popup.DHUtt-1P.js";import"./uv-transition.DsI_QwgO.js";import"./uv-line.C_KnvacM.js";import"./uv-safe-bottom.BHLPinXG.js";import"./uv-loading-icon.CvAzROqE.js";import"./uv-checkbox-group.Bw9nYDv5.js";import"./uv-badge.BU-UsVd-.js";const O=I({name:"uv-skeletons",mixins:[s,n],props:{loading:{type:Boolean,default:!0},skeleton:{type:Array,default:()=>[]},animate:{type:Boolean,default:!0},round:{type:Boolean,default:!1},...null==(e=null==(t=uni.$uv)?void 0:t.props)?void 0:e.skeleton},data:()=>({elements:[],opacity:.5,duration:600}),computed:{animateClass(){return this.animate?"uv-skeleton--animation":"uv-skeleton--static"},roundClass(){return this.round?"uv-skeleton--round":"uv-skeleton--radius"},style(t){return t=>this.$uv.deepMerge({},this.$uv.addStyle(t.style))}},created(){this.init()},methods:{init(){let t=[];if(!this.$uv.test.array(this.skeleton))return this.$uv.error("skeleton参数必须为数组形式，参考文档示例：");this.skeleton.forEach((e=>{const s=this.getElCounts(e);t=t.concat(s)})),this.elements=[...t]},getElCounts(t){let e=[],s=[];if(this.$uv.test.number(t))return e.push({type:"gap",height:t}),e;{const n=t.type?t.type:"line",l=t.num?t.num:1,o=t.style?t.style:{},i=this.$uv.test.array(o),r=t.gap?t.gap:"20rpx",a=t.children?t.children:[];for(let t=0;t<a.length;t++)s[t]={clas:a[t].type.indexOf("avatar")>-1||a[t].type.indexOf("custom")>-1?"":"uv-skeleton__group__sub",elements:this.getElCounts(a[t])};for(let t=0;t<l;t++)r&&t<l&&t>0&&e.push({type:"gap",height:r}),e.push({clas:`uv-skeleton__${n}`,type:n,style:i?o[t]:o,gap:r,children:s});return e}},createAnimation(t=1){if(!this.loading||!this.animate)return;let e=0;const s=this.$refs.skeleton;s.forEach((n=>{animation.transition(n,{styles:{opacity:t},duration:this.duration},(()=>{e++,e>=s.length&&setTimeout((()=>{this.createAnimation(t<1?1:this.opacity)}),200)}))}))}}},[["render",function(t,e,s,n,h,g){const m=p;return l(),o(m,{class:"uv-skeleton"},{default:i((()=>[s.loading?(l(),o(m,{key:0},{default:i((()=>[(l(!0),r(a,null,c(h.elements,((e,s)=>(l(),o(m,{key:s},{default:i((()=>["flex"==e.type?(l(),o(m,{key:0,class:"uv-skeleton__group",style:u([g.style(e)])},{default:i((()=>[(l(!0),r(a,null,c(e.children,((e,s)=>(l(),o(m,{class:f([e.clas]),style:u([g.style(e)]),key:s},{default:i((()=>[(l(!0),r(a,null,c(e.elements,((e,s)=>(l(),o(m,{key:s},{default:i((()=>["gap"==e.type?(l(),o(m,{key:0,style:u({height:t.$uv.addUnit(e.height,"rpx")})},null,8,["style"])):(l(),o(m,{key:1,class:f([e.clas,g.roundClass,g.animateClass]),style:u([g.style(e)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"]))])),_:2},1024)))),128))])),_:2},1032,["class","style"])))),128))])),_:2},1032,["style"])):"custom"==e.type?(l(),o(m,{key:1,class:f([e.clas,g.animateClass]),style:u([g.style(e)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"])):"gap"==e.type?(l(),o(m,{key:2,style:u({height:t.$uv.addUnit(e.height,"rpx")})},null,8,["style"])):(l(),o(m,{key:3,class:f([e.clas,g.roundClass,g.animateClass]),style:u([g.style(e)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"]))])),_:2},1024)))),128))])),_:1})):(l(),o(m,{key:1},{default:i((()=>[d(t.$slots,"default",{},void 0,!0)])),_:3}))])),_:3})}],["__scopeId","data-v-d144c73d"]]);const D=I({props:{list:{type:Array,default:[]}},watch:{list:{handler(t,e){}}},data:()=>({config:h,xsStringUtils:U,xsDateUtils:T,sp:{},sr:{},control:{swiperHeight:0,currentIndex:0}}),created(){this.xinit(),this.public_show()},methods:{xinit(){this.$nextTick((()=>{this.setSwiperHeight()}))},public_show(){},public_reset(){this.public_show()},control_changeSwiper(t){this.currentIndex=t.detail.current,this.$nextTick((()=>{this.setSwiperHeight()}))},setSwiperHeight(){let t="#xp-item-"+this.currentIndex;console.log(t);let e=g().in(this);e.select(t).boundingClientRect(),e.exec((t=>{t&&t[0]&&(this.control.swiperHeight=t[0].height)}))}}},[["render",function(t,e,s,n,f,d){const h=y,g=p,k=_,v=x;return l(),o(v,{autoplay:!0,onChange:d.control_changeSwiper,current:f.control.currentIndex,style:u({height:f.control.swiperHeight+"px"})},{default:i((()=>[(l(!0),r(a,null,c(s.list,((t,e)=>(l(),o(k,{key:e},{default:i((()=>[m(g,{id:"xp-item-"+e,class:"swiper-item"},{default:i((()=>[m(h,{class:"image",src:t,mode:"widthFix"},null,8,["src"])])),_:2},1032,["id"])])),_:2},1024)))),128))])),_:1},8,["onChange","current","style"])}],["__scopeId","data-v-dd17e558"]]);const R=I({data:()=>({config:h,xsStringUtils:U,xsDateUtils:T,sp:{id:null},sr:{userinfo:null,conf:[],confinfos:[],confuser:null,signordernum:null},control:{info_content:"",loginStyle:{height:"80rpx",background:"blue",color:"#fff"}},skeleton:[{type:"line",num:10,gap:"10px",style:["width: 300px;marginBottom: 25px;","height: 50px;","width: 250px;"]}]}),onLoad(t){let e=t.id?t.id:k.getUrlParam("id");this.sp.id=parseInt(e),this.xinit()},onShow(){let t=this;t.$nextTick((function(e){t.public_show()}))},onPullDownRefresh(){let t=this;setTimeout((function(){t.public_show(),v()}),1e3)},methods:{xinit(){let t=this;b.getUserinfo((function(e){t.sr.userinfo=e}))},public_show(){let t=this;k.getById("conf",t.sp.id,(function(e){k.processRowImages(e.conf,["images"]),t.sr.conf=e.conf,t.sr.confinfos=e.confinfos,t.sr.confuser=e.confuser,L.length(t.sr.confinfos)>0&&(t.control.info_content=t.sr.confinfos[0].content)}))},public_reset(){this.public_show()},onLoginSuccess(t){this.sr.userinfo=t,this._signin()},control_clickTab(t){this.control.info_content=t.content},control_signin(){let t=this;null!=t.sr.userinfo&&null!=t.sr.userinfo.mobile&&""!=t.sr.userinfo.mobile?t._signin():t.$refs["xc-uv-clogin-loginform"].public_open()},_signin(){let t=this;k.post("csmsignin/xp_conf/submitSignin",{confid:t.sp.id},(function(e){t.sr.signordernum=e.signordernum,t.sr.confuser=e.confuser,w.toast("签到成功，您是第"+e.signordernum+"个签到人！"),t.public_reset()}))}}},[["render",function(t,e,s,n,c,u){const f=q(j("uv-skeletons"),O),d=q(j("xc-uniapp-swiper"),D),h=p,g=q(j("xc-uv-clogin-loginform"),H),y=q(j("uv-button"),A),_=q(j("uv-parse"),B),x=q(j("uv-tabs"),E);return l(),r(a,null,[m(f,{loading:!c.sr.conf.name,skeleton:c.skeleton},null,8,["loading","skeleton"]),c.sr.conf.name?(l(),o(h,{key:0,class:"xc-wrap"},{default:i((()=>[m(d,{list:c.sr.conf.images},null,8,["list"]),m(h,{class:"xc-block"},{default:i((()=>[m(h,{class:"xc-title"},{default:i((()=>[S($(c.sr.conf.name),1)])),_:1}),null!=c.sr.conf.meetdate?(l(),o(h,{key:0,class:"xc-content"},{default:i((()=>[S("会议时间: "+$(c.sr.conf.meetdate),1)])),_:1})):C("",!0),null!=c.sr.conf.meetdate?(l(),o(h,{key:1,class:"xc-content"},{default:i((()=>[S("会议地点: "+$(c.sr.conf.meetaddress),1)])),_:1})):C("",!0),null!=c.sr.conf.unsignedcontentq?(l(),o(h,{key:2,class:"xc-content"},{default:i((()=>[S($(c.sr.conf.unsignedcontentq),1)])),_:1})):C("",!0),m(g,{ref:"xc-uv-clogin-loginform",onOnLoginSuccess:u.onLoginSuccess},null,8,["onOnLoginSuccess"]),c.sr.confuser?C("",!0):(l(),o(y,{key:3,class:"xc-pt",type:"primary",text:"立即签到",onClick:u.control_signin},null,8,["onClick"])),c.sr.confuser?(l(),o(h,{key:4,class:"xp-title-tag Y"},{default:i((()=>[S("已签到")])),_:1})):C("",!0),c.sr.confuser?C("",!0):(l(),o(h,{key:5,class:"xp-title-tag N"},{default:i((()=>[S("未签到")])),_:1}))])),_:1}),null==c.sr.confuser&&null!=c.sr.conf.unsignedcontentq?(l(),r("section",{key:0},[m(h,{class:"xc-sep"},{default:i((()=>[S(" ")])),_:1}),m(h,{class:"xc-block"},{default:i((()=>[m(_,{content:c.sr.conf.unsignedcontentq},null,8,["content"])])),_:1})])):C("",!0),null!=c.sr.confuser&&null!=c.sr.conf.siginedcontent?(l(),r("section",{key:1},[m(h,{class:"xc-sep"},{default:i((()=>[S(" ")])),_:1}),m(h,{class:"xc-block"},{default:i((()=>[m(_,{content:c.sr.conf.siginedcontent},null,8,["content"])])),_:1})])):C("",!0),m(h,{class:"xc-sep"},{default:i((()=>[S(" ")])),_:1}),m(h,{class:"xc-block"},{default:i((()=>[m(x,{list:c.sr.confinfos,onClick:u.control_clickTab,keyName:"title",scrollable:!0},null,8,["list","onClick"]),m(h,{class:"xc-content"},{default:i((()=>[m(_,{content:c.control.info_content},null,8,["content"])])),_:1})])),_:1})])),_:1})):C("",!0)],64)}],["__scopeId","data-v-5e262ac0"]]);export{R as default};
