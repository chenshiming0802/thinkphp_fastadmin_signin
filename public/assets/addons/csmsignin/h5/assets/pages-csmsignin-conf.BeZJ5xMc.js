import{c as s,a as n,o as t,b as e,d as o,w as i,F as l,r as c,e as r,n as a,f as u,i as f,g as p,S as d,h as g,x as h,s as m,j as x,k as _,l as k,m as w,t as b}from"./index-DF3Oe_BT.js";import{x as y,_ as v}from"./uv-empty.JCucxcPA.js";import{x as S,a as j,r as H}from"./uni-app.es.BbLMVxrv.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as C}from"./xc-uv-clogin-loginform.dnAR3UfJ.js";import{_ as I}from"./uv-button.6Rc36gv1.js";import{_ as U}from"./uv-parse.FtX3bMbU.js";import{_ as q}from"./uv-tabs.DfKB6wVg.js";import"./uv-popup.DVSRveok.js";import"./uv-transition.DFNY6vf5.js";import"./uv-line.BDtu8k49.js";import"./uv-safe-bottom.eyJ3lPlw.js";import"./uv-loading-icon.DRDJKsdY.js";import"./uv-checkbox-group.CyUxCOl6.js";import"./uv-badge.D1W83v3Q.js";const L=T({props:{list:{type:Array,default:[]}},watch:{list:{handler(s,n){let t=this;t.list.length>1&&this.$nextTick((()=>{t.setSwiperHeight()}))}}},data:()=>({config:s,xsStringUtils:S,xsDateUtils:j,sp:{},sr:{},control:{swiperHeight:0,currentIndex:0}}),created(){this.xinit(),this.public_show()},methods:{xinit(){},public_show(){let s=this;s.list.length>1&&(this.$nextTick((()=>{s.setSwiperHeight()})),setTimeout((function(){s.setSwiperHeight()}),100))},public_reset(){this.public_show()},control_changeSwiper(s){console.log("control_changeSwiper"),this.$nextTick((()=>{this.setSwiperHeight()}))},setSwiperHeight(){let s=this,t="#xp-item-0";console.log("setSwiperHeight "+t);let e=n().in(s);e.select(t).boundingClientRect(),e.exec((n=>{n&&n[0]&&(s.control.swiperHeight=n[0].height)}))}}},[["render",function(s,n,h,m,x,_){const k=f,w=p,b=d,y=g;return t(),e(l,null,[h.list.length>1?(t(),o(y,{key:0,autoplay:!0,onChange:_.control_changeSwiper,current:x.control.currentIndex,style:a({height:x.control.swiperHeight+"px"})},{default:i((()=>[(t(!0),e(l,null,c(h.list,((s,n)=>(t(),o(b,{key:n},{default:i((()=>[r(w,{class:"swiper-item"},{default:i((()=>[r(k,{id:"xp-item-"+n,class:"image",src:s,mode:"widthFix"},null,8,["id","src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["onChange","current","style"])):u("",!0),1==h.list.length?(t(),o(k,{key:1,class:"image",src:h.list[0],mode:"widthFix"},null,8,["src"])):u("",!0)],64)}],["__scopeId","data-v-6287743d"]]);const $=T({data:()=>({config:s,xsStringUtils:S,xsDateUtils:j,sp:{id:null},sr:{userinfo:null,conf:null,confinfos:[],confuser:null,signordernum:null},control:{info_content:"",loginStyle:{height:"80rpx",background:"blue",color:"#fff"}},skeleton:[{type:"line",num:3,gap:"10px",style:["width: 150px;","width: 200px;","width: 250px;"]}]}),onLoad(s){let n=s.id?s.id:h.getUrlParam("id");this.sp.id=parseInt(n),this.xinit()},onShow(){let s=this;s.$nextTick((function(n){s.public_show()}))},onPullDownRefresh(){let s=this;setTimeout((function(){s.public_show(),m()}),1e3)},methods:{xinit(){let s=this;x.getUserinfo((function(n){s.sr.userinfo=n}))},public_show(){let s=this;h.getById("conf",s.sp.id,(function(n){h.processRowImages(n.conf,["images"]),console.log(n.conf.images),s.sr.conf=n.conf,s.sr.confinfos=n.confinfos,s.sr.confuser=n.confuser,y.length(s.sr.confinfos)>0&&(s.control.info_content=s.sr.confinfos[0].content)}))},public_reset(){this.public_show()},onLoginSuccess(s){this.sr.userinfo=s,this._signin()},control_clickTab(s){this.control.info_content=s.content},control_signin(){let s=this;null!=s.sr.userinfo&&null!=s.sr.userinfo.mobile&&""!=s.sr.userinfo.mobile?s._signin():s.$refs["xc-uv-clogin-loginform"].public_open()},_signin(){let s=this;h.post("csmsignin/xp_conf/submitSignin",{confid:s.sp.id},(function(n){s.sr.signordernum=n.signordernum,s.sr.confuser=n.confuser,_.toast("签到成功，您是第"+n.signordernum+"个签到人！"),s.public_reset()}))}}},[["render",function(s,n,l,c,a,f){const d=H(k("uv-empty"),v),g=p,h=H(k("xc-uniapp-swiper"),L),m=H(k("xc-uv-clogin-loginform"),C),x=H(k("uv-button"),I),_=H(k("uv-parse"),U),y=H(k("uv-tabs"),q);return t(),e("section",null,[a.sr.conf?u("",!0):(t(),o(g,{key:0,class:"xc-wrap"},{default:i((()=>[r(d,{mode:"data",marginTop:"100px",text:"没有会议,请联系管理员"})])),_:1})),a.sr.conf?(t(),o(g,{key:1,class:"xc-wrap"},{default:i((()=>[r(h,{list:a.sr.conf.images},null,8,["list"]),r(g,{class:"xc-block"},{default:i((()=>[r(g,{class:"xc-title"},{default:i((()=>[w(b(a.sr.conf.name),1)])),_:1}),null!=a.sr.conf.meetdate?(t(),o(g,{key:0,class:"xc-content"},{default:i((()=>[w("会议时间: "+b(a.sr.conf.meetdate),1)])),_:1})):u("",!0),null!=a.sr.conf.meetdate?(t(),o(g,{key:1,class:"xc-content"},{default:i((()=>[w("会议地点: "+b(a.sr.conf.meetaddress),1)])),_:1})):u("",!0),null!=a.sr.conf.unsignedcontentq?(t(),o(g,{key:2,class:"xc-content"},{default:i((()=>[w(b(a.sr.conf.unsignedcontentq),1)])),_:1})):u("",!0),r(m,{ref:"xc-uv-clogin-loginform",onOnLoginSuccess:f.onLoginSuccess},null,8,["onOnLoginSuccess"]),a.sr.confuser?u("",!0):(t(),o(x,{key:3,class:"xc-pt",type:"primary",text:"立即签到",onClick:f.control_signin},null,8,["onClick"])),a.sr.confuser?(t(),o(g,{key:4,class:"xp-title-tag Y"},{default:i((()=>[w("已签到")])),_:1})):u("",!0),a.sr.confuser?u("",!0):(t(),o(g,{key:5,class:"xp-title-tag N"},{default:i((()=>[w("未签到")])),_:1}))])),_:1}),null==a.sr.confuser&&null!=a.sr.conf.unsignedcontentq?(t(),e("section",{key:0},[r(g,{class:"xc-sep"},{default:i((()=>[w(" ")])),_:1}),r(g,{class:"xc-block"},{default:i((()=>[r(_,{content:a.sr.conf.unsignedcontentq},null,8,["content"])])),_:1})])):u("",!0),null!=a.sr.confuser&&null!=a.sr.conf.siginedcontent?(t(),e("section",{key:1},[r(g,{class:"xc-sep"},{default:i((()=>[w(" ")])),_:1}),r(g,{class:"xc-block"},{default:i((()=>[r(_,{content:a.sr.conf.siginedcontent},null,8,["content"])])),_:1})])):u("",!0),r(g,{class:"xc-sep"},{default:i((()=>[w(" ")])),_:1}),r(g,{class:"xc-block"},{default:i((()=>[r(y,{list:a.sr.confinfos,onClick:f.control_clickTab,keyName:"title",scrollable:!0},null,8,["list","onClick"]),r(g,{class:"xc-content"},{default:i((()=>[r(_,{content:a.control.info_content},null,8,["content"])])),_:1})])),_:1})])),_:1})):u("",!0)])}],["__scopeId","data-v-8de20d6c"]]);export{$ as default};
