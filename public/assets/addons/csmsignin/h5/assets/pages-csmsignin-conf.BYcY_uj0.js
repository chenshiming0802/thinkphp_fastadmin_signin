var t,e;import{m as s,a as n,o as l,c as o,w as i,b as r,F as c,r as a,n as u,d as f,e as p,i as d,f as h,g,h as m,j as y,k as _,S as k,l as x,x as v,s as b,p as w,q as S,t as j,u as C,v as $}from"./index-C9rZ7Etr.js";import{_ as H}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{x as T,a as U,r as I}from"./uv-icon.DSvEdO5n.js";import{_ as q}from"./xc-uv-clogin-loginform.BsZ0afTv.js";import{_ as A}from"./uv-button.CWauuAIw.js";import{_ as E}from"./uv-parse.wtcen7T8.js";import{_ as L}from"./uv-tabs.B11vpQsh.js";import{x as B}from"./XsArrayUtils.Be-EjtvS.js";import"./uv-popup.DmGpcaVm.js";import"./uv-transition.x7msCryv.js";import"./uv-line.Cg-M0Gcv.js";import"./uv-safe-bottom.fbeqw3Cz.js";import"./uv-loading-icon.Dn1OaElp.js";import"./uv-checkbox-group.Co7ciPSK.js";import"./uv-badge.COQN9SZ9.js";const O=H({name:"uv-skeletons",mixins:[s,n],props:{loading:{type:Boolean,default:!0},skeleton:{type:Array,default:()=>[]},animate:{type:Boolean,default:!0},round:{type:Boolean,default:!1},...null==(e=null==(t=uni.$uv)?void 0:t.props)?void 0:e.skeleton},data:()=>({elements:[],opacity:.5,duration:600}),computed:{animateClass(){return this.animate?"uv-skeleton--animation":"uv-skeleton--static"},roundClass(){return this.round?"uv-skeleton--round":"uv-skeleton--radius"},style(t){return t=>this.$uv.deepMerge({},this.$uv.addStyle(t.style))}},created(){this.init()},methods:{init(){let t=[];if(!this.$uv.test.array(this.skeleton))return this.$uv.error("skeleton参数必须为数组形式，参考文档示例：");this.skeleton.forEach((e=>{const s=this.getElCounts(e);t=t.concat(s)})),this.elements=[...t]},getElCounts(t){let e=[],s=[];if(this.$uv.test.number(t))return e.push({type:"gap",height:t}),e;{const n=t.type?t.type:"line",l=t.num?t.num:1,o=t.style?t.style:{},i=this.$uv.test.array(o),r=t.gap?t.gap:"20rpx",c=t.children?t.children:[];for(let t=0;t<c.length;t++)s[t]={clas:c[t].type.indexOf("avatar")>-1||c[t].type.indexOf("custom")>-1?"":"uv-skeleton__group__sub",elements:this.getElCounts(c[t])};for(let t=0;t<l;t++)r&&t<l&&t>0&&e.push({type:"gap",height:r}),e.push({clas:`uv-skeleton__${n}`,type:n,style:i?o[t]:o,gap:r,children:s});return e}},createAnimation(t=1){if(!this.loading||!this.animate)return;let e=0;const s=this.$refs.skeleton;s.forEach((n=>{animation.transition(n,{styles:{opacity:t},duration:this.duration},(()=>{e++,e>=s.length&&setTimeout((()=>{this.createAnimation(t<1?1:this.opacity)}),200)}))}))}}},[["render",function(t,e,s,n,h,g){const m=d;return l(),o(m,{class:"uv-skeleton"},{default:i((()=>[s.loading?(l(),o(m,{key:0},{default:i((()=>[(l(!0),r(c,null,a(h.elements,((e,s)=>(l(),o(m,{key:s},{default:i((()=>["flex"==e.type?(l(),o(m,{key:0,class:"uv-skeleton__group",style:u([g.style(e)])},{default:i((()=>[(l(!0),r(c,null,a(e.children,((e,s)=>(l(),o(m,{class:f([e.clas]),style:u([g.style(e)]),key:s},{default:i((()=>[(l(!0),r(c,null,a(e.elements,((e,s)=>(l(),o(m,{key:s},{default:i((()=>["gap"==e.type?(l(),o(m,{key:0,style:u({height:t.$uv.addUnit(e.height,"rpx")})},null,8,["style"])):(l(),o(m,{key:1,class:f([e.clas,g.roundClass,g.animateClass]),style:u([g.style(e)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"]))])),_:2},1024)))),128))])),_:2},1032,["class","style"])))),128))])),_:2},1032,["style"])):"custom"==e.type?(l(),o(m,{key:1,class:f([e.clas,g.animateClass]),style:u([g.style(e)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"])):"gap"==e.type?(l(),o(m,{key:2,style:u({height:t.$uv.addUnit(e.height,"rpx")})},null,8,["style"])):(l(),o(m,{key:3,class:f([e.clas,g.roundClass,g.animateClass]),style:u([g.style(e)]),ref_for:!0,ref:"skeleton"},null,8,["class","style"]))])),_:2},1024)))),128))])),_:1})):(l(),o(m,{key:1},{default:i((()=>[p(t.$slots,"default",{},void 0,!0)])),_:3}))])),_:3})}],["__scopeId","data-v-d144c73d"]]);const D=H({props:{list:{type:Array,default:[]}},watch:{list:{handler(t,e){let s=this;s.list.length>1&&this.$nextTick((()=>{s.setSwiperHeight()}))}}},data:()=>({config:h,xsStringUtils:T,xsDateUtils:U,sp:{},sr:{},control:{swiperHeight:0,currentIndex:0}}),created(){this.xinit(),this.public_show()},methods:{xinit(){},public_show(){let t=this;t.list.length>1&&(this.$nextTick((()=>{t.setSwiperHeight()})),setTimeout((function(){t.setSwiperHeight()}),100))},public_reset(){this.public_show()},control_changeSwiper(t){console.log("control_changeSwiper"),this.$nextTick((()=>{this.setSwiperHeight()}))},setSwiperHeight(){let t=this,e="#xp-item-0";console.log("setSwiperHeight "+e);let s=g().in(t);s.select(e).boundingClientRect(),s.exec((e=>{e&&e[0]&&(t.control.swiperHeight=e[0].height)}))}}},[["render",function(t,e,s,n,f,p){const h=_,g=d,v=k,b=x;return l(),r(c,null,[s.list.length>1?(l(),o(b,{key:0,autoplay:!0,onChange:p.control_changeSwiper,current:f.control.currentIndex,style:u({height:f.control.swiperHeight+"px"})},{default:i((()=>[(l(!0),r(c,null,a(s.list,((t,e)=>(l(),o(v,{key:e},{default:i((()=>[m(g,{class:"swiper-item"},{default:i((()=>[m(h,{id:"xp-item-"+e,class:"image",src:t,mode:"widthFix"},null,8,["id","src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["onChange","current","style"])):y("",!0),1==s.list.length?(l(),o(h,{key:1,class:"image",src:s.list[0],mode:"widthFix"},null,8,["src"])):y("",!0)],64)}],["__scopeId","data-v-6287743d"]]);const F=H({data:()=>({config:h,xsStringUtils:T,xsDateUtils:U,sp:{id:null},sr:{userinfo:null,conf:[],confinfos:[],confuser:null,signordernum:null},control:{info_content:"",loginStyle:{height:"80rpx",background:"blue",color:"#fff"}},skeleton:[{type:"line",num:3,gap:"10px",style:["width: 150px;","width: 200px;","width: 250px;"]}]}),onLoad(t){let e=t.id?t.id:v.getUrlParam("id");this.sp.id=parseInt(e),this.xinit()},onShow(){let t=this;t.$nextTick((function(e){t.public_show()}))},onPullDownRefresh(){let t=this;setTimeout((function(){t.public_show(),b()}),1e3)},methods:{xinit(){let t=this;w.getUserinfo((function(e){t.sr.userinfo=e}))},public_show(){let t=this;v.getById("conf",t.sp.id,(function(e){v.processRowImages(e.conf,["images"]),t.sr.conf=e.conf,t.sr.confinfos=e.confinfos,t.sr.confuser=e.confuser,B.length(t.sr.confinfos)>0&&(t.control.info_content=t.sr.confinfos[0].content)}))},public_reset(){this.public_show()},onLoginSuccess(t){this.sr.userinfo=t,this._signin()},control_clickTab(t){this.control.info_content=t.content},control_signin(){let t=this;null!=t.sr.userinfo&&null!=t.sr.userinfo.mobile&&""!=t.sr.userinfo.mobile?t._signin():t.$refs["xc-uv-clogin-loginform"].public_open()},_signin(){let t=this;v.post("csmsignin/xp_conf/submitSignin",{confid:t.sp.id},(function(e){t.sr.signordernum=e.signordernum,t.sr.confuser=e.confuser,S.toast("签到成功，您是第"+e.signordernum+"个签到人！"),t.public_reset()}))}}},[["render",function(t,e,s,n,c,a){const u=I(j("uv-skeletons"),O),f=I(j("xc-uniapp-swiper"),D),p=d,h=I(j("xc-uv-clogin-loginform"),q),g=I(j("uv-button"),A),_=I(j("uv-parse"),E),k=I(j("uv-tabs"),L);return l(),r("section",null,[m(u,{loading:!c.sr.conf.name,skeleton:c.skeleton},null,8,["loading","skeleton"]),c.sr.conf.name?(l(),o(p,{key:0,class:"xc-wrap"},{default:i((()=>[m(f,{list:c.sr.conf.images},null,8,["list"]),m(p,{class:"xc-block"},{default:i((()=>[m(p,{class:"xc-title"},{default:i((()=>[C($(c.sr.conf.name),1)])),_:1}),null!=c.sr.conf.meetdate?(l(),o(p,{key:0,class:"xc-content"},{default:i((()=>[C("会议时间: "+$(c.sr.conf.meetdate),1)])),_:1})):y("",!0),null!=c.sr.conf.meetdate?(l(),o(p,{key:1,class:"xc-content"},{default:i((()=>[C("会议地点: "+$(c.sr.conf.meetaddress),1)])),_:1})):y("",!0),null!=c.sr.conf.unsignedcontentq?(l(),o(p,{key:2,class:"xc-content"},{default:i((()=>[C($(c.sr.conf.unsignedcontentq),1)])),_:1})):y("",!0),m(h,{ref:"xc-uv-clogin-loginform",onOnLoginSuccess:a.onLoginSuccess},null,8,["onOnLoginSuccess"]),c.sr.confuser?y("",!0):(l(),o(g,{key:3,class:"xc-pt",type:"primary",text:"立即签到",onClick:a.control_signin},null,8,["onClick"])),c.sr.confuser?(l(),o(p,{key:4,class:"xp-title-tag Y"},{default:i((()=>[C("已签到")])),_:1})):y("",!0),c.sr.confuser?y("",!0):(l(),o(p,{key:5,class:"xp-title-tag N"},{default:i((()=>[C("未签到")])),_:1}))])),_:1}),null==c.sr.confuser&&null!=c.sr.conf.unsignedcontentq?(l(),r("section",{key:0},[m(p,{class:"xc-sep"},{default:i((()=>[C(" ")])),_:1}),m(p,{class:"xc-block"},{default:i((()=>[m(_,{content:c.sr.conf.unsignedcontentq},null,8,["content"])])),_:1})])):y("",!0),null!=c.sr.confuser&&null!=c.sr.conf.siginedcontent?(l(),r("section",{key:1},[m(p,{class:"xc-sep"},{default:i((()=>[C(" ")])),_:1}),m(p,{class:"xc-block"},{default:i((()=>[m(_,{content:c.sr.conf.siginedcontent},null,8,["content"])])),_:1})])):y("",!0),m(p,{class:"xc-sep"},{default:i((()=>[C(" ")])),_:1}),m(p,{class:"xc-block"},{default:i((()=>[m(k,{list:c.sr.confinfos,onClick:a.control_clickTab,keyName:"title",scrollable:!0},null,8,["list","onClick"]),m(p,{class:"xc-content"},{default:i((()=>[m(_,{content:c.control.info_content},null,8,["content"])])),_:1})])),_:1})])),_:1})):y("",!0)])}],["__scopeId","data-v-cf8f80b4"]]);export{F as default};
