import{c as o,x as t,q as e,s as a,k as l,j as r,l as n,m as s,d as i,w as u,g as c,o as m,e as p,p as d,t as f}from"./index-P_cLt-V2.js";import{a as _,b as x,c as v}from"./uv-popup.9HTs5IvN.js";import{x as b,r as h}from"./uni-app.es.qT0q2I_i.js";import{_ as g}from"./xc-uv-upload.DQYwuGft.js";import{_ as k}from"./uv-button.CapyWq2Z.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-transition.CcGN9U5O.js";import"./uv-line.B02Rw8W0.js";import"./uv-safe-bottom.BG61ITrv.js";import"./uv-loading-icon.CssbsuKb.js";const w=j({data(){return{config:o,xsStringUtils:t,xsDateUtils:b,sp:{},sr:{},control:{form:{nickname:null,avatar:null},rules:{nickname:{required:!0,message:this.$t("xc.rules_required_input")}}}}},onLoad(o){this.xinit()},onShow(){let o=this;e.onShow((function(){o.public_show()}))},onPullDownRefresh(){let o=this;setTimeout((function(){o.public_show(),a()}),1e3)},methods:{xinit(){},public_reset(){this.public_show()},public_show(){let o=this;l.getUserinfo((function(t){r.row2form(t,o.control.form)}))},control_submit(){let o=this,t=o.control;o.$refs.form.validate().then((e=>{r.my_post_xtype("xc","cloginApi","updateUserinfo",t.form,(function(t){n.message_success(o.$t("xc.msg_success_save"),(function(){n.router_navigateBack()}))}))}))},control_clickDelete(){n.router_gotoPage("/pages/xclogin/me_delete")},mp_control_changeNick(o){this.control.form.nickname=o.detail.value},mp_control_onChooseAvatar(o){let t=this.control;r.upload(o.detail.avatarUrl,(function(o){t.form.avatar=o}))}}},[["render",function(o,t,e,a,l,r){const n=h(s("uv-input"),_),b=h(s("uv-form-item"),x),j=h(s("xc-uv-upload"),g),w=h(s("uv-form"),v),U=h(s("uv-button"),k),$=c;return m(),i($,{class:"xc-wrap"},{default:u((()=>[p($,{class:"xc-block"},{default:u((()=>[p(w,{labelPosition:"left",model:l.control.form,rules:l.control.rules,ref:"form"},{default:u((()=>[p(b,{label:o.$t("xclogin._model_.nickname"),prop:"nickname",required:"",borderBottom:""},{default:u((()=>[p(n,{modelValue:l.control.form.nickname,"onUpdate:modelValue":t[0]||(t[0]=o=>l.control.form.nickname=o),border:"surround"},null,8,["modelValue"])])),_:1},8,["label"]),p(b,{label:o.$t("xclogin._model_.avatar"),prop:"avatar",required:"",borderBottom:""},{default:u((()=>[p(j,{modelValue:l.control.form.avatar,"onUpdate:modelValue":t[1]||(t[1]=o=>l.control.form.avatar=o),maxCount:"1"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules"]),p(U,{type:"primary",text:o.$t("xc.btn_save"),customStyle:"margin-top: 10px",onClick:r.control_submit},null,8,["text","onClick"]),p($,{class:"xc-afterbuton",onClick:r.control_clickDelete},{default:u((()=>[d(f(o.$t("xclogin.me.btn_destoryaccount")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-04ad9362"]]);export{w as default};
